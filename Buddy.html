<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Smart Study Planner</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
    :root {
        --primary: #6366f1;
        --primary-dark: #4f46e5;
        --secondary: #10b981;
        --accent: #f59e0b;
        --danger: #ef4444;
        --light: #f8fafc;
        --dark: #1e293b;
        --muted: #64748b;
        --border: #e2e8f0;
        --card-bg: #ffffff;
        --success: #22c55e;
    }
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;}
    body{background: linear-gradient(135deg, rgb(17, 228, 189) 0%, rgb(8, 35, 183) 100%);min-height:100vh;color:var(--dark);overflow-x:hidden;}
    .container{max-width:1200px;margin:0 auto;padding:20px;}
    header{background:#07ed54ee;backdrop-filter:blur(10px);padding:20px;border-radius:16px;box-shadow:0 4px 20px rgba(0,0,0,0.1);margin-bottom:30px;display:flex;justify-content:space-between;align-items:center;animation:slideDown 0.6s ease-out;}
    .logo{display:flex;align-items:center;gap:12px;}
    .logo i{color:var(--primary);font-size:28px;}
    .logo h1{font-size:28px;font-weight:700;background:linear-gradient(135deg,var(--primary),var(--primary-dark));-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
    .nav-tabs{display:flex;gap:10px;}
    .tab-btn{padding:10px 20px;border:none;background:transparent;border-radius:8px;cursor:pointer;font-weight:500;transition:all 0.3s ease;color:var(--muted);}
    .tab-btn.active{background:var(--primary);color:white;box-shadow:0 4px 12px rgba(99,102,241,0.3);}
    .tab-btn:hover:not(.active){background:rgba(99,102,241,0.1);color:var(--primary);}
    .main-content{display:grid;grid-template-columns:1fr 350px;gap:30px;}
    .content-section{background:var(--card-bg);border-radius:16px;padding:25px;box-shadow:0 4px 20px rgba(0,0,0,0.08);margin-bottom:25px;animation:fadeIn 0.5s ease-out;}
    .section-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;}
    .section-title{font-size:20px;font-weight:600;color:var(--dark);}
    .btn{padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:500;transition:all 0.3s ease;display:inline-flex;align-items:center;gap:8px;}
    .btn-primary{background:var(--primary);color:white;}
    .btn-primary:hover{background:var(--primary-dark);transform:translateY(-2px);box-shadow:0 6px 15px rgba(99,102,241,0.4);}
    .btn-secondary{background:var(--secondary);color:white;}
    .btn-secondary:hover{background:#0da271;transform:translateY(-2px);box-shadow:0 6px 15px rgba(16,185,129,0.4);}
    .form-group{margin-bottom:20px;}
    .form-label{display:block;margin-bottom:8px;font-weight:500;color:var(--dark);}
    .form-input,.form-select,.form-textarea{width:100%;padding:12px 16px;border:2px solid var(--border);border-radius:8px;font-size:16px;transition:all 0.3s ease;}
    .form-input:focus,.form-select:focus,.form-textarea:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(99,102,241,0.2);}
    .form-textarea{min-height:100px;resize:vertical;}
    .task-card{background:white;border-radius:12px;padding:20px;margin-bottom:15px;box-shadow:0 2px 10px rgba(0,0,0,0.05);border-left:4px solid var(--primary);transition:all 0.3s ease;animation:slideIn 0.4s ease-out;}
    .task-card:hover{transform:translateY(-3px);box-shadow:0 6px 15px rgba(0,0,0,0.1);}
    .task-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:12px;}
    .task-title{font-size:18px;font-weight:600;color:var(--dark);}
    .task-priority{padding:4px 10px;border-radius:20px;font-size:12px;font-weight:500;}
    .priority-high{background:rgba(239,68,68,0.1);color:var(--danger);}
    .priority-medium{background:rgba(245,158,11,0.1);color:var(--accent);}
    .priority-low{background:rgba(16,185,129,0.1);color:var(--secondary);}
    .task-details{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-bottom:15px;}
    .task-detail{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:14px;}
    .task-detail i{font-size:16px;}
    .task-actions{display:flex;gap:10px;justify-content:flex-end;}
    .btn-icon{padding:8px;border-radius:6px;background:transparent;border:none;cursor:pointer;transition:all 0.2s ease;}
    .btn-edit{color:var(--primary);}
    .btn-edit:hover{background:rgba(99,102,241,0.1);}
    .btn-delete{color:var(--danger);}
    .btn-delete:hover{background:rgba(239,68,68,0.1);}
    .btn-complete{color:var(--success);}
    .btn-complete:hover{background:rgba(34,197,94,0.1);}
    .completed .task-title{text-decoration:line-through;color:var(--muted);}
    .completed .task-card{border-left-color:var(--success);opacity:0.8;}
    .stats-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:25px;}
    .stat-card{background:white;border-radius:12px;padding:20px;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,0.08);transition:transform 0.3s ease;}
    .stat-card:hover{transform:translateY(-5px);}
    .stat-icon{font-size:32px;margin-bottom:12px;display:block;}
    .stat-total .stat-icon{color:var(--primary);}
    .stat-completed .stat-icon{color:var(--success);}
    .stat-pending .stat-icon{color:var(--accent);}
    .stat-number{font-size:32px;font-weight:700;margin-bottom:5px;}
    .stat-label{color:var(--muted);font-size:14px;}
    .progress-bar{height:8px;background:var(--border);border-radius:4px;overflow:hidden;margin:20px 0;}
    .progress-fill{height:100%;background:linear-gradient(90deg,var(--primary),var(--primary-dark));border-radius:4px;transition:width 0.8s ease;}
    .progress-text{text-align:center;font-weight:600;color:var(--dark);margin-bottom:10px;}
    .timeline{position:relative;padding-left:30px;margin:30px 0;}
    .timeline::before{content:'';position:absolute;left:0;top:0;height:100%;width:3px;background:var(--primary);border-radius:3px;}
    .timeline-item{position:relative;margin-bottom:25px;}
    .timeline-item::before{content:'';position:absolute;left:-37px;top:5px;width:15px;height:15px;border-radius:50%;background:var(--primary);border:3px solid white;box-shadow:0 0 0 3px var(--primary);}
    .timeline-content{background:white;padding:15px;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
    .timeline-date{font-size:12px;color:var(--muted);margin-bottom:5px;}
    .timeline-title{font-weight:600;margin-bottom:5px;}
    .empty-state{text-align:center;padding:40px 20px;color:var(--muted);}
    .empty-state i{font-size:48px;margin-bottom:15px;display:block;color:var(--border);}
    .filter-bar{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap;}
    .filter-btn{padding:8px 16px;border:2px solid var(--border);background:white;border-radius:20px;cursor:pointer;font-size:14px;transition:all 0.3s ease;}
    .filter-btn.active{background:var(--primary);color:white;border-color:var(--primary);}
    .notification{position:fixed;bottom:20px;right:20px;padding:15px 20px;background:white;border-radius:8px;box-shadow:0 4px 15px rgba(0,0,0,0.2);display:flex;align-items:center;gap:10px;transform:translateX(100%);transition:transform 0.3s ease;z-index:1000;}
    .notification.show{transform:translateX(0);}
    .notification i{font-size:20px;}
    .notification.success i{color:var(--success);}
    .notification.error i{color:var(--danger);}
    @keyframes slideDown{from{opacity:0;transform:translateY(-20px);}to{opacity:1;transform:translateY(0);}}
    @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
    @keyframes slideIn{from{opacity:0;transform:translateX(-20px);}to{opacity:1;transform:translateX(0);}}
    @keyframes pulse{0%{transform:scale(1);}50%{transform:scale(1.05);}100%{transform:scale(1);}}
    @media(max-width:1024px){.main-content{grid-template-columns:1fr;}.stats-grid{grid-template-columns:repeat(2,1fr);}}
    @media(max-width:768px){header{flex-direction:column;gap:15px;text-align:center;}.nav-tabs{flex-wrap:wrap;justify-content:center;}.stats-grid{grid-template-columns:1fr;}.task-details{grid-template-columns:1fr;}.filter-bar{justify-content:center;}}
    @media(max-width:480px){.container{padding:10px;}.content-section{padding:15px;}.task-actions{flex-wrap:wrap;}}
    .pulse{animation:pulse 2s infinite;}
</style>
</head>
<body>
<div class="container">
<header>
    <div class="logo">
        <i class="fas fa-graduation-cap"></i>
        <h1>Smart Study Planner</h1>
    </div>
    <div class="nav-tabs">
        <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
        <button class="tab-btn" data-tab="tasks">Tasks</button>
        <button class="tab-btn" data-tab="timeline">Timeline</button>
        <button class="tab-btn" data-tab="settings">Settings</button>
    </div>
</header>

<div class="main-content">
    <div class="main-area">
        <!-- Dashboard Tab -->
        <div class="tab-content" id="dashboard-content">
            <div class="stats-grid">
                <div class="stat-card stat-total">
                    <i class="fas fa-tasks stat-icon"></i>
                    <div class="stat-number" id="total-tasks">0</div>
                    <div class="stat-label">Total Tasks</div>
                </div>
                <div class="stat-card stat-completed">
                    <i class="fas fa-check-circle stat-icon"></i>
                    <div class="stat-number" id="completed-tasks">0</div>
                    <div class="stat-label">Completed</div>
                </div>
                <div class="stat-card stat-pending">
                    <i class="fas fa-clock stat-icon"></i>
                    <div class="stat-number" id="pending-tasks">0</div>
                    <div class="stat-label">Pending</div>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Study Progress</h2>
                </div>
                <div class="progress-text" id="progress-percent">0% Complete</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill" style="width:0%"></div>
                </div>
            </div>

            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">Upcoming Deadlines</h2>
                    <button class="btn btn-primary" id="add-task-btn"><i class="fas fa-plus"></i> Add Task</button>
                </div>
                <div id="upcoming-tasks">
                    <div class="empty-state">
                        <i class="fas fa-calendar-check"></i>
                        <p>No upcoming deadlines</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tasks Tab -->
        <div class="tab-content" id="tasks-content" style="display:none;">
            <div class="content-section">
                <div class="section-header">
                    <h2 class="section-title">All Tasks</h2>
                    <button class="btn btn-primary" id="add-task-btn-2"><i class="fas fa-plus"></i> Add Task</button>
                </div>
                <div class="filter-bar">
                    <button class="filter-btn active" data-filter="all">All Tasks</button>
                    <button class="filter-btn" data-filter="pending">Pending</button>
                    <button class="filter-btn" data-filter="completed">Completed</button>
                    <button class="filter-btn" data-filter="high">High Priority</button>
                </div>
                <div id="all-tasks">
                    <div class="empty-state"><i class="fas fa-tasks"></i><p>No tasks yet. Add your first task to get started!</p></div>
                </div>
            </div>
        </div>

        <!-- Timeline Tab -->
        <div class="tab-content" id="timeline-content" style="display:none;">
            <div class="content-section">
                <div class="section-header"><h2 class="section-title">Study Timeline</h2></div>
                <div class="timeline" id="task-timeline">
                    <div class="empty-state"><i class="fas fa-road"></i><p>No timeline events yet. Add tasks to see your study journey!</p></div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div class="tab-content" id="settings-content" style="display:none;">
            <div class="content-section">
                <div class="section-header"><h2 class="section-title">Settings</h2></div>
                <div class="form-group">
                    <label class="form-label">Daily Reminder Time</label>
                    <input type="time" class="form-input" id="reminder-time" value="09:00">
                </div>
                <div class="form-group">
                    <label class="form-label">Enable Browser Notifications</label>
                    <select class="form-select" id="notifications-enabled">
                        <option value="true">Enabled</option>
                        <option value="false">Disabled</option>
                    </select>
                </div>
                <button class="btn btn-primary" id="save-settings"><i class="fas fa-save"></i> Save Settings</button>
                <div class="form-group" style="margin-top:30px;">
                    <label class="form-label">Data Management</label>
                    <div style="display:flex;gap:10px;margin-top:10px;">
                        <button class="btn btn-secondary" id="export-data"><i class="fas fa-download"></i> Export Data</button>
                        <button class="btn btn-danger" id="clear-data"><i class="fas fa-trash"></i> Clear All Data</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <div class="content-section">
            <div class="section-header"><h2 class="section-title">Add New Task</h2></div>
            <form id="task-form">
                <div class="form-group">
                    <label class="form-label">Task Title</label>
                    <input type="text" class="form-input" id="task-title" placeholder="Enter task title" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Description</label>
                    <textarea class="form-textarea" id="task-description" placeholder="Enter task description"></textarea>
                </div>
                <div class="form-group">
                    <label class="form-label">Priority</label>
                    <select class="form-select" id="task-priority">
                        <option value="low">Low</option>
                        <option value="medium">Medium</option>
                        <option value="high">High</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Due Date</label>
                    <input type="date" class="form-input" id="task-due-date" required>
                </div>
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select class="form-select" id="task-category">
                        <option value="Python">Python</option>
                        <option value="AI/ML">AI/ML</option>
                        <option value="Cybersecurity">Cybersecurity</option>
                        <option value="Java">Java</option>
                        <option value="Other">Other Programming</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary" style="width:100%;"><i class="fas fa-plus"></i> Add Task</button>
            </form>
        </div>

        <div class="content-section">
            <div class="section-header"><h2 class="section-title">Quick Stats</h2></div>
            <div class="task-detail"><i class="fas fa-clock"></i> <span>Tasks due today: <strong id="today-tasks">0</strong></span></div>
            <div class="task-detail"><i class="fas fa-exclamation-circle"></i> <span>High priority tasks: <strong id="high-priority-tasks">0</strong></span></div>
            <div class="task-detail"><i class="fas fa-check"></i> <span>Completion rate: <strong id="completion-rate">0%</strong></span></div>
        </div>
    </div>
</div>
</div>

<div class="notification" id="notification">
    <i class="fas fa-check-circle"></i>
    <span id="notification-message"></span>
</div>

<script>
let tasks = [];

document.addEventListener('DOMContentLoaded', initializeApp);

function initializeApp() {
    loadTasks();
    setupEventListeners();
    setupTabs();
    updateStatistics();

    const today = new Date().toISOString().split('T')[0];
    document.getElementById('task-due-date').min = today;
}

function loadTasks() {
    const storedTasks = localStorage.getItem('studyPlannerTasks');
    if (storedTasks) {
        tasks = JSON.parse(storedTasks);
        renderTasks();
    }
}

function saveTasks() {
    localStorage.setItem('studyPlannerTasks', JSON.stringify(tasks));
    updateStatistics();
}

function setupEventListeners() {
    document.getElementById('task-form').addEventListener('submit', e => {
        e.preventDefault();
        addNewTask();
    });
    document.getElementById('add-task-btn').addEventListener('click', ()=>document.getElementById('task-title').focus());
    document.getElementById('add-task-btn-2').addEventListener('click', ()=>document.getElementById('task-title').focus());
    document.querySelectorAll('.filter-btn').forEach(btn=>{
        btn.addEventListener('click', function(){
            document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
            this.classList.add('active');
            renderAllTasks();
        });
    });
    document.getElementById('save-settings').addEventListener('click', saveSettings);
    document.getElementById('export-data').addEventListener('click', exportData);
    document.getElementById('clear-data').addEventListener('click', clearData);
}

function setupTabs() {
    const tabButtons = document.querySelectorAll('.tab-btn');
    const tabContents = document.querySelectorAll('.tab-content');
    tabButtons.forEach(btn=>{
        btn.addEventListener('click', ()=>{
            const tab = btn.dataset.tab;
            tabContents.forEach(tc=>tc.style.display='none');
            tabButtons.forEach(b=>b.classList.remove('active'));
            document.getElementById(`${tab}-content`).style.display='block';
            btn.classList.add('active');
            if(tab==='timeline') renderTimeline();
        });
    });
}

function addNewTask() {
    const title = document.getElementById('task-title').value.trim();
    const description = document.getElementById('task-description').value.trim();
    const priority = document.getElementById('task-priority').value;
    const dueDate = document.getElementById('task-due-date').value;
    const category = document.getElementById('task-category').value;

    if(!title || !dueDate){
        showNotification('Please fill in all required fields','error');
        return;
    }

    const newTask = {
        id: Date.now(),
        title,
        description,
        priority,
        dueDate,
        category,
        completed:false,
        createdAt:new Date().toISOString()
    };

    tasks.push(newTask);
    saveTasks();
    renderTasks();

    document.getElementById('task-form').reset();
    showNotification('Task added successfully!','success');

    const el = document.querySelector(`[data-task-id="${newTask.id}"]`);
    if(el){el.classList.add('pulse');setTimeout(()=>el.classList.remove('pulse'),2000);}
}

function toggleTaskCompletion(id){
    const t=tasks.find(t=>t.id===id);
    if(t){t.completed=!t.completed;saveTasks();renderTasks();showNotification(`Task marked as ${t.completed?'completed':'pending'}`,'success');}
}

function editTask(id){
    const t=tasks.find(t=>t.id===id);
    if(t){
        document.getElementById('task-title').value=t.title;
        document.getElementById('task-description').value=t.description;
        document.getElementById('task-priority').value=t.priority;
        document.getElementById('task-due-date').value=t.dueDate;
        document.getElementById('task-category').value=t.category;
        tasks=tasks.filter(task=>task.id!==id);
        saveTasks();
        renderTasks();
        showNotification('Task ready for editing','success');
        document.getElementById('task-form').scrollIntoView({behavior:'smooth'});
    }
}

function deleteTask(id){
    if(confirm('Are you sure you want to delete this task?')){
        tasks=tasks.filter(t=>t.id!==id);
        saveTasks();
        renderTasks();
        showNotification('Task deleted successfully','success');
    }
}

function renderTasks(){renderUpcomingTasks();renderAllTasks();renderTimeline();}

function renderUpcomingTasks(){
    const container=document.getElementById('upcoming-tasks');
    const upcoming=tasks.filter(t=>!t.completed).sort((a,b)=>new Date(a.dueDate)-new Date(b.dueDate)).slice(0,5);
    if(upcoming.length===0){container.innerHTML='<div class="empty-state"><i class="fas fa-calendar-check"></i><p>No upcoming deadlines</p></div>';return;}
    container.innerHTML=upcoming.map(t=>`
    <div class="task-card" data-task-id="${t.id}">
        <div class="task-header">
            <h3 class="task-title">${t.title}</h3>
            <span class="task-priority priority-${t.priority}">${t.priority}</span>
        </div>
        <div class="task-details">
            <div class="task-detail"><i class="fas fa-calendar"></i><span>${formatDate(t.dueDate)}</span></div>
            <div class="task-detail"><i class="fas fa-tag"></i><span>${t.category}</span></div>
        </div>
        <div class="task-actions">
            <button class="btn-icon btn-complete" onclick="toggleTaskCompletion(${t.id})"><i class="fas fa-check"></i></button>
            <button class="btn-icon btn-edit" onclick="editTask(${t.id})"><i class="fas fa-edit"></i></button>
            <button class="btn-icon btn-delete" onclick="deleteTask(${t.id})"><i class="fas fa-trash"></i></button>
        </div>
    </div>`).join('');
}

function renderAllTasks(){
    const container=document.getElementById('all-tasks');
    const filter=document.querySelector('.filter-btn.active').dataset.filter;
    let filtered=tasks;
    if(filter==='pending') filtered=tasks.filter(t=>!t.completed);
    else if(filter==='completed') filtered=tasks.filter(t=>t.completed);
    else if(filter==='high') filtered=tasks.filter(t=>t.priority==='high');
    if(filtered.length===0){container.innerHTML='<div class="empty-state"><i class="fas fa-tasks"></i><p>No tasks found</p></div>';return;}
    container.innerHTML=filtered.map(t=>`
    <div class="task-card ${t.completed?'completed':''}" data-task-id="${t.id}">
        <div class="task-header">
            <h3 class="task-title">${t.title}</h3>
            <span class="task-priority priority-${t.priority}">${t.priority}</span>
        </div>
        <div class="task-details">
            <div class="task-detail"><i class="fas fa-calendar"></i><span>${formatDate(t.dueDate)}</span></div>
            <div class="task-detail"><i class="fas fa-tag"></i><span>${t.category}</span></div>
        </div>
        ${t.description?`<p style="margin:10px 0;color:var(--muted);">${t.description}</p>`:''}
        <div class="task-actions">
            <button class="btn-icon btn-complete" onclick="toggleTaskCompletion(${t.id})"><i class="fas fa-${t.completed?'undo':'check'}"></i></button>
            <button class="btn-icon btn-edit" onclick="editTask(${t.id})"><i class="fas fa-edit"></i></button>
            <button class="btn-icon btn-delete" onclick="deleteTask(${t.id})"><i class="fas fa-trash"></i></button>
        </div>
    </div>`).join('');
}

function renderTimeline(){
    const container=document.getElementById('task-timeline');
    const timeline=[...tasks].sort((a,b)=>new Date(a.createdAt)-new Date(b.createdAt));
    if(timeline.length===0){container.innerHTML='<div class="empty-state"><i class="fas fa-road"></i><p>No timeline events yet. Add tasks to see your study journey!</p></div>';return;}
    container.innerHTML=timeline.map(t=>`
    <div class="timeline-item">
        <div class="timeline-content">
            <div class="timeline-date">${formatDateTime(t.createdAt)}</div>
            <div class="timeline-title">${t.title}</div>
            <p>${t.completed?'Completed':'Added'} - ${t.priority} priority</p>
        </div>
    </div>`).join('');
}

function updateStatistics(){
    const total=tasks.length;
    const completed=tasks.filter(t=>t.completed).length;
    const pending=total-completed;
    const rate=total>0?Math.round((completed/total)*100):0;
    document.getElementById('total-tasks').textContent=total;
    document.getElementById('completed-tasks').textContent=completed;
    document.getElementById('pending-tasks').textContent=pending;
    document.getElementById('progress-percent').textContent=`${rate}% Complete`;
    document.getElementById('progress-fill').style.width=`${rate}%`;
    const today=new Date().toISOString().split('T')[0];
    document.getElementById('today-tasks').textContent=tasks.filter(t=>t.dueDate===today&&!t.completed).length;
    document.getElementById('high-priority-tasks').textContent=tasks.filter(t=>t.priority==='high'&&!t.completed).length;
    document.getElementById('completion-rate').textContent=`${rate}%`;
}

function saveSettings(){
    const reminder=document.getElementById('reminder-time').value;
    const notif=document.getElementById('notifications-enabled').value==='true';
    localStorage.setItem('studyPlannerSettings',JSON.stringify({reminderTime:reminder,notificationsEnabled:notif}));
    showNotification('Settings saved successfully','success');
}

function exportData(){
    const dataStr=JSON.stringify(tasks,null,2);
    const dataUri='data:application/json;charset=utf-8,'+encodeURIComponent(dataStr);
    const link=document.createElement('a');
    link.setAttribute('href',dataUri);
    link.setAttribute('download','study-planner-data.json');
    link.click();
    showNotification('Data exported successfully','success');
}

function clearData(){
    if(confirm('Are you sure you want to clear all data? This action cannot be undone.')){
        tasks=[];
        localStorage.removeItem('studyPlannerTasks');
        renderTasks();
        updateStatistics();
        showNotification('All data cleared','success');
    }
}

function showNotification(msg,type='success'){
    const n=document.getElementById('notification');
    const m=document.getElementById('notification-message');
    m.textContent=msg;
    n.className=`notification ${type}`;
    n.classList.add('show');
    setTimeout(()=>{n.classList.remove('show');},3000);
}

function formatDate(d){return new Date(d).toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'});}
function formatDateTime(d){return new Date(d).toLocaleString(undefined,{year:'numeric',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});}

// Make global
window.toggleTaskCompletion=toggleTaskCompletion;
window.editTask=editTask;
window.deleteTask=deleteTask;
</script>
</body>
</html>
